# å²©æ€§è¯†åˆ«ç«èµ› - PSOä¼˜åŒ–ç‰ˆæœ¬ ğŸš€

åŸºäºæµ‹äº•æ›²çº¿çš„å²©æ€§è¯†åˆ«ä¸åˆ†ç±»ç®—æ³•ï¼Œä½¿ç”¨ **PSOï¼ˆç²’å­ç¾¤ä¼˜åŒ–ï¼‰** è‡ªåŠ¨è°ƒä¼˜ XGBoost å’Œ LightGBM è¶…å‚æ•°ã€‚

---

## ğŸ“ é¡¹ç›®æ–‡ä»¶

```
å²©æ€§è¯†åˆ«æ•°æ®é›†/
â”œâ”€â”€ main.py                    # åŸç‰ˆä»£ç ï¼ˆ5ä¸ªæ¨¡å‹ï¼‰
â”œâ”€â”€ main_pso.py               # PSOä¼˜åŒ–ç‰ˆï¼ˆ2ä¸ªæ¨¡å‹ï¼Œæ¨èä½¿ç”¨ï¼‰ â­
â”œâ”€â”€ test_pso.py               # å¿«é€Ÿæµ‹è¯•è„šæœ¬
â”œâ”€â”€ feature_analysis.py       # ç‰¹å¾åˆ†æå·¥å…·
â”‚
â”œâ”€â”€ PSOä¼˜åŒ–è¯´æ˜.md            # PSOè¯¦ç»†ä½¿ç”¨è¯´æ˜ ğŸ“–
â”œâ”€â”€ å¯¹æ¯”è¯´æ˜.md               # main.py vs main_pso.py å¯¹æ¯”
â”œâ”€â”€ ä¼˜åŒ–æ€è·¯.md               # 10å¤§è°ƒä¼˜æ€è·¯å®Œæ•´æŒ‡å—
â”‚
â”œâ”€â”€ train.csv                 # è®­ç»ƒæ•°æ®
â”œâ”€â”€ validation_without_label.csv  # æµ‹è¯•æ•°æ®
â”‚
â””â”€â”€ è¾“å‡ºæ–‡ä»¶/
    â”œâ”€â”€ submission_pso.csv        # PSOç‰ˆæœ¬é¢„æµ‹ç»“æœ
    â”œâ”€â”€ submission_advanced.csv   # åŸç‰ˆé¢„æµ‹ç»“æœ
    â”œâ”€â”€ best_params.json          # PSOæ‰¾åˆ°çš„æœ€ä¼˜å‚æ•°ï¼ˆå¯é€‰ï¼‰
    â””â”€â”€ test_submission.csv       # æµ‹è¯•è¾“å‡º
```

---

## âš¡ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

```bash
# å®‰è£…ä¾èµ–
pip install pandas numpy scikit-learn lightgbm xgboost

# å¯é€‰ï¼šç‰¹å¾åˆ†æå·¥å…·
pip install matplotlib seaborn openpyxl
```

### 2. å¿«é€Ÿæµ‹è¯•ï¼ˆéªŒè¯ä»£ç ï¼‰

```bash
# è¿è¡Œæµ‹è¯•è„šæœ¬ï¼ˆçº¦5åˆ†é’Ÿï¼‰
python test_pso.py
```

### 3. æ­£å¼è®­ç»ƒ

#### é€‰é¡¹A: ä¸ä½¿ç”¨PSOä¼˜åŒ–ï¼ˆå¿«é€Ÿï¼‰

```python
# ä¿®æ”¹ main_pso.py æœ€åå‡ è¡Œ
optimize=False  # ä½¿ç”¨é»˜è®¤å‚æ•°

# è¿è¡Œï¼ˆçº¦18åˆ†é’Ÿï¼‰
python main_pso.py
```

#### é€‰é¡¹B: ä½¿ç”¨PSOä¼˜åŒ–ï¼ˆæ¨èï¼‰

```python
# main_pso.py é»˜è®¤é…ç½®
optimize=True
n_particles=15  # ç²’å­æ•°
max_iter=20     # è¿­ä»£æ¬¡æ•°

# è¿è¡Œï¼ˆçº¦1-2å°æ—¶ï¼‰
python main_pso.py
```

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### âœ… å·²å®ç°

| åŠŸèƒ½ | è¯´æ˜ | æ–‡ä»¶ |
|------|------|------|
| **PSOè¶…å‚æ•°ä¼˜åŒ–** | è‡ªåŠ¨æœç´¢æœ€ä¼˜å‚æ•° | `main_pso.py` |
| **XGBoost + LightGBM** | åªä¿ç•™æœ€æœ‰æ•ˆçš„2ä¸ªæ ‘æ¨¡å‹ | `main_pso.py` |
| **90+ç‰¹å¾å·¥ç¨‹** | åœ°è´¨ç‰©ç†+æ¢¯åº¦+æ³¢åŠ¨æ€§ç‰¹å¾ | `main_pso.py` |
| **çµæ´»é…ç½®** | å¯é€‰æ‹©æ˜¯å¦ä¼˜åŒ–ã€ç²’å­æ•°ç­‰ | `main_pso.py` |
| **ç‰¹å¾åˆ†æ** | é‡è¦æ€§ã€ç›¸å…³æ€§ã€æ–¹å·®åˆ†æ | `feature_analysis.py` |

### âŒ å·²ç§»é™¤ï¼ˆç›¸æ¯”åŸç‰ˆï¼‰

- âŒ CatBoostï¼ˆæ•ˆæœä¸å¦‚LGB/XGBï¼‰
- âŒ Transformer ç¥ç»ç½‘ç»œï¼ˆéªŒè¯F1ä»…0.44ï¼‰
- âŒ CNN ç¥ç»ç½‘ç»œï¼ˆéªŒè¯F1ä»…0.48ï¼‰

---

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

| ç‰ˆæœ¬ | æ¨¡å‹ | ä¼˜åŒ–æ–¹å¼ | è®­ç»ƒæ—¶é—´ | é¢„æœŸåˆ†æ•° |
|------|------|---------|---------|---------|
| **åŸç‰ˆ** | 5ä¸ªï¼ˆLGB+XGB+CAT+Transformer+CNNï¼‰ | æ‰‹åŠ¨è°ƒå‚ | 40åˆ†é’Ÿ | 0.628 |
| **PSOç‰ˆï¼ˆä¸ä¼˜åŒ–ï¼‰** | 2ä¸ªï¼ˆLGB+XGBï¼‰ | é»˜è®¤å‚æ•° | 18åˆ†é’Ÿ | 0.633~0.640 |
| **PSOç‰ˆï¼ˆä¼˜åŒ–ï¼‰** | 2ä¸ªï¼ˆLGB+XGBï¼‰ | PSOè‡ªåŠ¨ä¼˜åŒ– | 1-2å°æ—¶ | **0.640~0.660** â­ |

---

## ğŸ”§ PSO å‚æ•°è°ƒæ•´

### å¿«é€Ÿæµ‹è¯•ï¼ˆ30-45åˆ†é’Ÿï¼‰

```python
submission = identifier.train_and_predict(
    "train.csv",
    "validation_without_label.csv",
    optimize=True,
    n_particles=10,  # æ›´å°‘çš„ç²’å­
    max_iter=10      # æ›´å°‘çš„è¿­ä»£
)
```

### æ ‡å‡†é…ç½®ï¼ˆ1-2å°æ—¶ï¼Œæ¨èï¼‰

```python
submission = identifier.train_and_predict(
    "train.csv",
    "validation_without_label.csv",
    optimize=True,
    n_particles=15,  # å¹³è¡¡ç²¾åº¦å’Œé€Ÿåº¦
    max_iter=20
)
```

### æ·±åº¦ä¼˜åŒ–ï¼ˆ3-5å°æ—¶ï¼‰

```python
submission = identifier.train_and_predict(
    "train.csv",
    "validation_without_label.csv",
    optimize=True,
    n_particles=20,  # æ›´å¤šç²’å­
    max_iter=30      # æ›´å¤šè¿­ä»£
)
```

---

## ğŸ“š æ–‡æ¡£è¯´æ˜

### 1. PSOä¼˜åŒ–è¯´æ˜.md
- PSOç®—æ³•åŸç†
- å‚æ•°æœç´¢ç©ºé—´
- æ—¶é—´ä¼°ç®—
- ä½¿ç”¨åœºæ™¯
- è°ƒè¯•æŠ€å·§

### 2. å¯¹æ¯”è¯´æ˜.md
- main.py vs main_pso.py è¯¦ç»†å¯¹æ¯”
- ä»£ç ç»“æ„å¯¹æ¯”
- æ€§èƒ½å¯¹æ¯”
- è¿ç§»æŒ‡å—

### 3. ä¼˜åŒ–æ€è·¯.md
- 10å¤§è°ƒä¼˜æ€è·¯ï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰
- ç‰¹å¾å·¥ç¨‹è¯¦è§£
- Stackingé›†æˆ
- ä¼ªæ ‡ç­¾ç­‰é«˜çº§æŠ€å·§

---

## ğŸ” å…³é”®ä¼˜åŠ¿

### 1. è‡ªåŠ¨å‚æ•°ä¼˜åŒ– ğŸ¤–

```
ä¼ ç»Ÿæ–¹å¼:
æ‰‹åŠ¨ä¿®æ”¹å‚æ•° â†’ è®­ç»ƒ â†’ è¯„ä¼° â†’ é‡å¤ï¼ˆéœ€è¦å¤§é‡ç»éªŒï¼‰

PSOæ–¹å¼:
å®šä¹‰æœç´¢ç©ºé—´ â†’ PSOè‡ªåŠ¨æœç´¢ â†’ æ‰¾åˆ°æœ€ä¼˜å‚æ•°ï¼ˆæ— éœ€ç»éªŒï¼‰
```

### 2. ç®€åŒ–æ¨¡å‹æ¶æ„ ğŸ¯

```
åŸç‰ˆ: 5ä¸ªæ¨¡å‹ï¼ˆæ ‘æ¨¡å‹æ•ˆæœå¥½ï¼Œç¥ç»ç½‘ç»œæ•ˆæœå·®ï¼‰
PSOç‰ˆ: 2ä¸ªæ ‘æ¨¡å‹ï¼ˆä¸“æ³¨æœ€æœ‰æ•ˆçš„æ¨¡å‹ï¼‰

ç»“æœ: ä»£ç æ›´ç®€æ´ï¼Œæ•ˆæœæ›´å¥½
```

### 3. å®Œæ•´ç‰¹å¾å·¥ç¨‹ ğŸ“Š

```
90+ é«˜è´¨é‡ç‰¹å¾:
â”œâ”€â”€ åŸºç¡€ç‰¹å¾ (3ä¸ª): SP, GR, AC
â”œâ”€â”€ æ·±åº¦ç‰¹å¾ (5ä¸ª)
â”œâ”€â”€ æ»‘åŠ¨çª—å£ (18ä¸ª)
â”œâ”€â”€ åœ°è´¨ç‰©ç† (15ä¸ª): Larionovæ³¥è´¨å«é‡ã€æœ‰æ•ˆå­”éš™åº¦ç­‰
â”œâ”€â”€ ç‰¹å¾äº¤äº’ (11ä¸ª)
â”œâ”€â”€ æ¢¯åº¦ç‰¹å¾ (12ä¸ª)
â””â”€â”€ æ³¢åŠ¨æ€§ç‰¹å¾ (9ä¸ª)
```

---

## ğŸ’¡ ä½¿ç”¨å»ºè®®

### é¦–æ¬¡ä½¿ç”¨

1. **è¿è¡Œæµ‹è¯•**: `python test_pso.py` (5åˆ†é’Ÿ)
2. **å¿«é€ŸéªŒè¯**: `optimize=False` (18åˆ†é’Ÿ)
3. **PSOä¼˜åŒ–**: `optimize=True, n_particles=10, max_iter=10` (30åˆ†é’Ÿ)
4. **æ­£å¼æäº¤**: `optimize=True, n_particles=15, max_iter=20` (1-2å°æ—¶)

### åç»­ä½¿ç”¨

```python
# ä¿å­˜æœ€ä¼˜å‚æ•°
import json
with open('best_params.json', 'w') as f:
    json.dump(identifier.best_params, f, indent=4)

# ä¸‹æ¬¡ç›´æ¥åŠ è½½ï¼Œè·³è¿‡PSO
with open('best_params.json', 'r') as f:
    identifier.best_params = json.load(f)
models = identifier.train_optimized_models(X_train, y_train, groups)
```

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: å†…å­˜ä¸è¶³
**A**: å‡å°‘ `n_particles` åˆ° 10ï¼Œæˆ–ä½¿ç”¨ `optimize=False`

### Q2: PSOä¼˜åŒ–æ—¶é—´å¤ªé•¿
**A**: å‡å°‘ `max_iter` åˆ° 10-15

### Q3: æƒ³è¦æ›´é«˜åˆ†æ•°
**A**: 
1. å¢åŠ  `n_particles=20, max_iter=30`
2. å‚è€ƒ `ä¼˜åŒ–æ€è·¯.md` ä¸­çš„10å¤§è°ƒä¼˜æ–¹å‘
3. æ·»åŠ ç‰¹å¾é€‰æ‹©ã€Stackingé›†æˆç­‰

### Q4: å¦‚ä½•æŸ¥çœ‹ç‰¹å¾é‡è¦æ€§
**A**: 
```python
from feature_analysis import FeatureAnalyzer
analyzer = FeatureAnalyzer(X_train.values, y_train.values, feature_names)
report = analyzer.generate_feature_report()
```

---

## ğŸ“ˆ è¿›é˜¶ä¼˜åŒ–

### 1. æ‰©å±•æœç´¢ç©ºé—´

```python
# åœ¨ pso_optimize_lgb ä¸­
bounds = [
    (0.001, 0.2),    # æ‰©å¤§ learning_rate èŒƒå›´
    (15, 100),       # æ‰©å¤§ num_leaves èŒƒå›´
    ...
]
```

### 2. å¢åŠ è¯„ä¼°æŠ˜æ•°

```python
# åœ¨ objective å‡½æ•°ä¸­
for train_idx, val_idx in splits[:4]:  # ä»2æŠ˜æ”¹ä¸º4æŠ˜
    ...
```

### 3. æ·»åŠ å…¶ä»–æ¨¡å‹

```python
# å‚è€ƒ main.py æ·»åŠ  CatBoost
# æˆ–å‚è€ƒ ä¼˜åŒ–æ€è·¯.md æ·»åŠ  HistGradientBoosting
```

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

- **PSOç®—æ³•é—®é¢˜**: æŸ¥çœ‹ `PSOä¼˜åŒ–è¯´æ˜.md`
- **å¯¹æ¯”åˆ†æ**: æŸ¥çœ‹ `å¯¹æ¯”è¯´æ˜.md`
- **ä¼˜åŒ–æ€è·¯**: æŸ¥çœ‹ `ä¼˜åŒ–æ€è·¯.md`
- **ä»£ç é—®é¢˜**: è¿è¡Œ `python test_pso.py` è¿›è¡Œè¯Šæ–­

---

## ğŸ‰ æ€»ç»“

**main_pso.py æ˜¯ä¸“ä¸ºå²©æ€§è¯†åˆ«ç«èµ›ä¼˜åŒ–çš„ç‰ˆæœ¬ï¼š**

âœ… è‡ªåŠ¨å‚æ•°ä¼˜åŒ–ï¼ˆPSOç®—æ³•ï¼‰  
âœ… ç®€åŒ–æ¨¡å‹æ¶æ„ï¼ˆåªä¿ç•™æœ€æœ‰æ•ˆçš„ï¼‰  
âœ… å®Œæ•´ç‰¹å¾å·¥ç¨‹ï¼ˆ90+ç‰¹å¾ï¼‰  
âœ… çµæ´»å¯é…ç½®ï¼ˆç²’å­æ•°ã€è¿­ä»£æ¬¡æ•°ï¼‰  
âœ… æ˜“äºä½¿ç”¨ï¼ˆä¸€é”®è¿è¡Œï¼‰  

**é¢„æœŸæ•ˆæœ: 0.64~0.66 çš„ Macro F1 åˆ†æ•°ï¼** ğŸ†

---

## ğŸ“ æ›´æ–°æ—¥å¿—

**v1.0 (2025-10-11)**
- âœ… å®ç°PSOä¼˜åŒ–ç®—æ³•
- âœ… ç§»é™¤æ•ˆæœä¸ä½³çš„ç¥ç»ç½‘ç»œ
- âœ… ä¿ç•™XGBoostå’ŒLightGBM
- âœ… å®Œæ•´çš„ç‰¹å¾å·¥ç¨‹
- âœ… è¯¦ç»†çš„æ–‡æ¡£è¯´æ˜

---

**Good Luck! ğŸš€**
